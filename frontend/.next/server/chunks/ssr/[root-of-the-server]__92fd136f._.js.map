{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/SMART_ENGINE/frontend/src/app/%28components%29/Login/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\n\r\nexport default function LoginPage() {\r\n  const [formData, setFormData] = useState({ email: '', password: '', userType: '' });\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  // Debug: Log state changes\r\n  useEffect(() => {\r\n    console.log('üîÑ Form state updated:', formData);\r\n  }, [formData]);\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n    setMessage('');\r\n    setIsLoading(true);\r\n    \r\n    // Validation\r\n    if (!formData.email || !formData.password) {\r\n      setMessage('‚ùå Please fill in all required fields');\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n    \r\n    if (!formData.userType) {\r\n      setMessage('‚ùå Please select a user type');\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n    \r\n    console.log('üîê Attempting login with:', { \r\n      email: formData.email, \r\n      userType: formData.userType,\r\n      passwordLength: formData.password.length \r\n    });\r\n    \r\n    try {\r\n      // Call the backend API\r\n      const res = await fetch(\"http://localhost:5000/api/auth/login\", {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        credentials: 'include',\r\n        body: JSON.stringify(formData),\r\n      });\r\n      const data = await res.json();\r\n      console.log('üì® Login response:', { status: res.status, data });\r\n\r\n      const payload = data?.data || {};\r\n      const token = payload.token;\r\n      const user = payload.user;\r\n      \r\n      if (res.ok && data.success && token && user) {\r\n        setMessage('‚úÖ ' + data.message);\r\n        console.log('üéâ Login successful, redirecting...');\r\n        \r\n        // Store token in localStorage\r\n        localStorage.setItem('token', token);\r\n        \r\n        setTimeout(() => {\r\n          // Prefer backend userType, but fall back to the selected form userType\r\n          const type = (user?.userType || formData.userType || '').toLowerCase();\r\n          let path = '/jobseeker-dashboard';\r\n          if (type === 'recruiter') path = '/recruiter-dashboard';\r\n          else if (type === 'admin' || type === 'administrator') path = '/admin-dashboard';\r\n          \r\n          try {\r\n            const encoded = btoa(JSON.stringify({ user, token, userType: user.userType }));\r\n            window.location.href = `${path}?u=${encodeURIComponent(encoded)}`;\r\n          } catch (_) {\r\n            window.location.href = path;\r\n          }\r\n        }, 1200);\r\n      } else {\r\n        console.log('‚ùå Login failed:', data);\r\n        setMessage('‚ùå ' + (data?.message || 'Login failed'));\r\n      }\r\n    } catch (error) {\r\n      console.error('‚ùå Login error:', error);\r\n      setMessage('‚ùå Network error: Could not connect to server. Make sure backend is running on port 4000.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ \r\n      minHeight: '100vh', \r\n      backgroundColor: '#f8f3f3', \r\n      display: 'flex', \r\n      alignItems: 'center', \r\n      justifyContent: 'center', \r\n      padding: '16px' \r\n    }}>\r\n      <form className=\"login-card\" onSubmit={handleLogin}>\r\n        <h1 className=\"title\">AI Job Portal</h1>\r\n\r\n        {message && (\r\n          <div style={{\r\n            textAlign: 'center',\r\n            fontSize: '14px',\r\n            marginBottom: '12px',\r\n            padding: '8px 12px',\r\n            borderRadius: '6px',\r\n            color: message.includes('‚úÖ') ? '#166534' : '#991b1b',\r\n            backgroundColor: message.includes('‚úÖ') ? '#dcfce7' : '#fee2e2',\r\n            border: `1px solid ${message.includes('‚úÖ') ? '#bbf7d0' : '#fecaca'}`\r\n          }}>\r\n            {message}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"input-wrapper\">\r\n          <span className=\"icon email-icon\">‚úâÔ∏è</span>\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email address\"\r\n            className=\"input-field\"\r\n            value={formData.email}\r\n            onChange={(e) => {\r\n              console.log('Email changed to:', e.target.value);\r\n              setFormData({ ...formData, email: e.target.value });\r\n            }}\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"input-wrapper\">\r\n          <span className=\"icon\">üë§</span>\r\n          <select\r\n            className=\"input-field\"\r\n            value={formData.userType}\r\n            onChange={(e) => {\r\n              console.log('User type changed to:', e.target.value);\r\n              setFormData({ ...formData, userType: e.target.value });\r\n            }}\r\n            style={{ paddingLeft: '36px' }}\r\n            required\r\n          >\r\n            <option value=\"\">Select User Type</option>\r\n            <option value=\"jobseeker\"> Job Seeker</option>\r\n            <option value=\"recruiter\"> Recruiter</option>\r\n            <option value=\"admin\"> Administrator</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"input-wrapper\">\r\n          <span className=\"icon password-icon\">üîí</span>\r\n          <input\r\n            type={showPassword ? 'text' : 'password'}\r\n            placeholder=\"Password\"\r\n            className=\"input-field\"\r\n            value={formData.password}\r\n            onChange={(e) => {\r\n              console.log('Password changed, length:', e.target.value.length);\r\n              setFormData({ ...formData, password: e.target.value });\r\n            }}\r\n            required\r\n          />\r\n          <span className=\"toggle-password\" onClick={() => setShowPassword(!showPassword)}>{showPassword ? 'üôà' : 'üëÅÔ∏è'}</span>\r\n        </div>\r\n\r\n        <div className=\"forgot-wrapper\">\r\n          <Link href=\"/ForgotPassword\" className=\"forgot-link\">Forgot password?</Link>\r\n        </div>\r\n\r\n        <button type=\"submit\" className=\"btn-primary\" disabled={isLoading}>\r\n          {isLoading ? 'Logging in...' : 'Login'}\r\n        </button>\r\n\r\n        <p className=\"footer-text\">\r\n          Don&apos;t have an account? <Link href=\"/Signup\" className=\"link\">Sign up</Link>\r\n        </p>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;QAAE,OAAO;QAAI,UAAU;QAAI,UAAU;IAAG;IACjF,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,2BAA2B;IAC3B,IAAA,kNAAS,EAAC;QACR,QAAQ,GAAG,CAAC,0BAA0B;IACxC,GAAG;QAAC;KAAS;IAEb,MAAM,cAAc,OAAO;QACzB,EAAE,cAAc;QAChB,WAAW;QACX,aAAa;QAEb,aAAa;QACb,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC,SAAS,QAAQ,EAAE;YACzC,WAAW;YACX,aAAa;YACb;QACF;QAEA,IAAI,CAAC,SAAS,QAAQ,EAAE;YACtB,WAAW;YACX,aAAa;YACb;QACF;QAEA,QAAQ,GAAG,CAAC,6BAA6B;YACvC,OAAO,SAAS,KAAK;YACrB,UAAU,SAAS,QAAQ;YAC3B,gBAAgB,SAAS,QAAQ,CAAC,MAAM;QAC1C;QAEA,IAAI;YACF,uBAAuB;YACvB,MAAM,MAAM,MAAM,MAAM,wCAAwC;gBAC9D,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,aAAa;gBACb,MAAM,KAAK,SAAS,CAAC;YACvB;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,QAAQ,GAAG,CAAC,sBAAsB;gBAAE,QAAQ,IAAI,MAAM;gBAAE;YAAK;YAE7D,MAAM,UAAU,MAAM,QAAQ,CAAC;YAC/B,MAAM,QAAQ,QAAQ,KAAK;YAC3B,MAAM,OAAO,QAAQ,IAAI;YAEzB,IAAI,IAAI,EAAE,IAAI,KAAK,OAAO,IAAI,SAAS,MAAM;gBAC3C,WAAW,OAAO,KAAK,OAAO;gBAC9B,QAAQ,GAAG,CAAC;gBAEZ,8BAA8B;gBAC9B,aAAa,OAAO,CAAC,SAAS;gBAE9B,WAAW;oBACT,uEAAuE;oBACvE,MAAM,OAAO,CAAC,MAAM,YAAY,SAAS,QAAQ,IAAI,EAAE,EAAE,WAAW;oBACpE,IAAI,OAAO;oBACX,IAAI,SAAS,aAAa,OAAO;yBAC5B,IAAI,SAAS,WAAW,SAAS,iBAAiB,OAAO;oBAE9D,IAAI;wBACF,MAAM,UAAU,KAAK,KAAK,SAAS,CAAC;4BAAE;4BAAM;4BAAO,UAAU,KAAK,QAAQ;wBAAC;wBAC3E,OAAO,QAAQ,CAAC,IAAI,GAAG,GAAG,KAAK,GAAG,EAAE,mBAAmB,UAAU;oBACnE,EAAE,OAAO,GAAG;wBACV,OAAO,QAAQ,CAAC,IAAI,GAAG;oBACzB;gBACF,GAAG;YACL,OAAO;gBACL,QAAQ,GAAG,CAAC,mBAAmB;gBAC/B,WAAW,OAAO,CAAC,MAAM,WAAW,cAAc;YACpD;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kBAAkB;YAChC,WAAW;QACb,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,8OAAC;QAAI,OAAO;YACV,WAAW;YACX,iBAAiB;YACjB,SAAS;YACT,YAAY;YACZ,gBAAgB;YAChB,SAAS;QACX;kBACE,cAAA,8OAAC;YAAK,WAAU;YAAa,UAAU;;8BACrC,8OAAC;oBAAG,WAAU;8BAAQ;;;;;;gBAErB,yBACC,8OAAC;oBAAI,OAAO;wBACV,WAAW;wBACX,UAAU;wBACV,cAAc;wBACd,SAAS;wBACT,cAAc;wBACd,OAAO,QAAQ,QAAQ,CAAC,OAAO,YAAY;wBAC3C,iBAAiB,QAAQ,QAAQ,CAAC,OAAO,YAAY;wBACrD,QAAQ,CAAC,UAAU,EAAE,QAAQ,QAAQ,CAAC,OAAO,YAAY,WAAW;oBACtE;8BACG;;;;;;8BAIL,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAK,WAAU;sCAAkB;;;;;;sCAClC,8OAAC;4BACC,MAAK;4BACL,aAAY;4BACZ,WAAU;4BACV,OAAO,SAAS,KAAK;4BACrB,UAAU,CAAC;gCACT,QAAQ,GAAG,CAAC,qBAAqB,EAAE,MAAM,CAAC,KAAK;gCAC/C,YAAY;oCAAE,GAAG,QAAQ;oCAAE,OAAO,EAAE,MAAM,CAAC,KAAK;gCAAC;4BACnD;4BACA,QAAQ;;;;;;;;;;;;8BAIZ,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAK,WAAU;sCAAO;;;;;;sCACvB,8OAAC;4BACC,WAAU;4BACV,OAAO,SAAS,QAAQ;4BACxB,UAAU,CAAC;gCACT,QAAQ,GAAG,CAAC,yBAAyB,EAAE,MAAM,CAAC,KAAK;gCACnD,YAAY;oCAAE,GAAG,QAAQ;oCAAE,UAAU,EAAE,MAAM,CAAC,KAAK;gCAAC;4BACtD;4BACA,OAAO;gCAAE,aAAa;4BAAO;4BAC7B,QAAQ;;8CAER,8OAAC;oCAAO,OAAM;8CAAG;;;;;;8CACjB,8OAAC;oCAAO,OAAM;8CAAY;;;;;;8CAC1B,8OAAC;oCAAO,OAAM;8CAAY;;;;;;8CAC1B,8OAAC;oCAAO,OAAM;8CAAQ;;;;;;;;;;;;;;;;;;8BAI1B,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAK,WAAU;sCAAqB;;;;;;sCACrC,8OAAC;4BACC,MAAM,eAAe,SAAS;4BAC9B,aAAY;4BACZ,WAAU;4BACV,OAAO,SAAS,QAAQ;4BACxB,UAAU,CAAC;gCACT,QAAQ,GAAG,CAAC,6BAA6B,EAAE,MAAM,CAAC,KAAK,CAAC,MAAM;gCAC9D,YAAY;oCAAE,GAAG,QAAQ;oCAAE,UAAU,EAAE,MAAM,CAAC,KAAK;gCAAC;4BACtD;4BACA,QAAQ;;;;;;sCAEV,8OAAC;4BAAK,WAAU;4BAAkB,SAAS,IAAM,gBAAgB,CAAC;sCAAgB,eAAe,OAAO;;;;;;;;;;;;8BAG1G,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,uKAAI;wBAAC,MAAK;wBAAkB,WAAU;kCAAc;;;;;;;;;;;8BAGvD,8OAAC;oBAAO,MAAK;oBAAS,WAAU;oBAAc,UAAU;8BACrD,YAAY,kBAAkB;;;;;;8BAGjC,8OAAC;oBAAE,WAAU;;wBAAc;sCACG,8OAAC,uKAAI;4BAAC,MAAK;4BAAU,WAAU;sCAAO;;;;;;;;;;;;;;;;;;;;;;;AAK5E","debugId":null}}]
}